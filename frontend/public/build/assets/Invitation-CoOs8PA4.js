const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Questionnaire-CWw6RoVO.js","assets/vendor-vue-BcvRxASC.js","assets/vendor-BoxHjOd3.js","assets/vendor-BgDCIyLK.css","assets/vendor-vue-C86WLP6Y.css","assets/Alert-TY5PVnD8.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/Modal-DJFOm559.js","assets/Modal-gqcY4Y-j.css","assets/Spinner-CW_KfSez.js","assets/Countdown-KyHM4qeD.js","assets/Notification-B89uePgo.js","assets/Calendar-BXB5QNt1.js","assets/Gallery-DQcpLjpq.js","assets/Gallery-BQcvumtv.css"])))=>i.map(i=>d[i]);
import{_ as c}from"./app-BjUiReq9.js";import{d as J,r as w,u as K,p as h,o as ee,O as te,n as ae,a6 as oe,q as i,f as n,A as g,s as e,t as u,y as t,C as _,H as r,X as se,v as f,G as D,I as ne,b as ie,z as A,a8 as le}from"./vendor-vue-BcvRxASC.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-BoxHjOd3.js";const re={class:"bg-invitation"},ce={key:0,class:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30"},ue={class:"container mx-auto bg-white pb-10 shadow-xl font-baltica"},_e={class:"flex justify-center space-x-2 p-2"},ve=["disabled"],me=["disabled"],pe={key:0},he={class:"max-w-[650px] mx-auto h-[550px] relative"},ge=["src"],fe=["src"],xe={class:"container mx-auto mb-6"},be={class:"text-center text-xl sm:text-2xl mt-6 w-full"},we=["innerHTML"],ye={class:"border-yellow-300 border-t font-baltica border-b max-w-[400px] mx-auto py-4 my-8 font-semibold"},ke={key:0,class:"mb-4 text-gray-500 text-lg animate-fade-in-down"},Ee={key:1,class:"mb-4 text-gray-500 text-lg"},Ie={class:"px-4 mb-8 max-w-md mx-auto animate-fade-in-down"},De={key:0,class:"text-center mb-8"},Le={class:"flex justify-center items-center text-gray-600 text-lg"},Pe=["href"],Te={key:1},Ae={class:"max-w-[750px] mt-4 mx-2 sm:mx-auto border border-gray-100 bg-white p-4 shadow-xl rounded overflow-hidden"},Ce=["src"],Ve={class:"max-w-[750px] my-4 mx-2 sm:mx-auto border border-gray-100 bg-white p-4 shadow-xl rounded overflow-hidden"},Se={class:"mx-auto text-center mb-2 text-xl"},Me={class:"ml-2"},Oe={class:"text-center mt-4"},Re=["href"],Ne={key:1,class:"text-lg"},$e={key:2,class:"mb-8"},ze={key:3},Be=["src"],He={class:"flex justify-center items-center h-full"},je={key:1,class:"p-4",src:"/icons/music-pause.svg",alt:"Pause"},qe={class:"mt-2 mb-4"},Fe={class:"text-center font-semibold"},Ge={class:"p-4 text-center"},Ue={class:"mb-4"},Qe={class:"bg-white h-14 text-center p-2 border-yellow-700 border-t"},We={href:"/",class:"flex items-center justify-center space-x-2"},Xe={class:"text-sm font-taurus text-yellow-700"},Ye=J({__name:"Invitation",setup(Ze){const C=_(()=>c(()=>import("./Questionnaire-CWw6RoVO.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),L=_(()=>c(()=>import("./Modal-DJFOm559.js"),__vite__mapDeps([7,1,2,3,4,6,8]))),V=_(()=>c(()=>import("./Spinner-CW_KfSez.js"),__vite__mapDeps([9,6,1,2,3,4]))),S=_(()=>c(()=>import("./Countdown-KyHM4qeD.js"),__vite__mapDeps([10,6,1,2,3,4]))),M=_(()=>c(()=>import("./Notification-B89uePgo.js"),__vite__mapDeps([11,1,2,3,4]))),O=_(()=>c(()=>import("./vendor-vue-BcvRxASC.js").then(o=>o.ap),__vite__mapDeps([1,2,3,4]))),R=_(()=>c(()=>import("./vendor-vue-BcvRxASC.js").then(o=>o.av),__vite__mapDeps([1,2,3,4]))),N=_(()=>c(()=>import("./vendor-vue-BcvRxASC.js").then(o=>o.an),__vite__mapDeps([1,2,3,4]))),$=_(()=>c(()=>import("./vendor-vue-BcvRxASC.js").then(o=>o.am),__vite__mapDeps([1,2,3,4]))),z=_(()=>c(()=>import("./Calendar-BXB5QNt1.js"),__vite__mapDeps([12,1,2,3,4]))),B=_(()=>c(()=>import("./Gallery-DQcpLjpq.js"),__vite__mapDeps([13,1,2,3,4,6,14]))),x=w(!1),y=w(!1),P=w(!1),v=w(null),m=w(!0),p=ae(),b=te(),{t:d,locale:H}=K(),j=h(()=>p.state.app.event.loading),a=h(()=>p.state.app.event.data),k=h(()=>p.state.app.guestInvite),E=h(()=>a.value?.date?new Date(a.value.date)<new Date(new Date().setHours(0,0,0,0)):!0),q=h(()=>k.value?.invite_text||a.value?.description||""),F=h(()=>W(a.value?.video_link||"")),G=()=>{b.params.lang&&(H.value=b.params.lang,localStorage.setItem("lang",b.params.lang),p.commit("setLanguage"))},T=o=>{P.value=o,x.value=!0},I=()=>{x.value=!1,y.value=!1},U=o=>{if(!o)return"";const s=new Date(o.replace(" ","T"));return isNaN(s.getTime())?"":`${s.getDate().toString().padStart(2,"0")}/${(s.getMonth()+1).toString().padStart(2,"0")}/${s.getFullYear()}`},Q=()=>{x.value=!1,p.commit("notify",{type:"success",message:d("invitation_page.success_message")})},W=o=>{const s=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|u\/\w\/|watch\?v=|&v=|shorts\/))([a-zA-Z0-9_-]{11})(?:[^\s]*)$/,l=o.match(s);return l&&l[1].length===11?l[1]:null},X=()=>{if(!v.value)return;const o=v.value.play();o!==void 0&&o.then(()=>{m.value=!1}).catch(s=>{console.warn("Auto-play failed:",s)})},Y=()=>{if(v.value)if(m.value){const o=v.value.play();o!==void 0&&o.then(()=>{m.value=!1}).catch(s=>{console.warn("Manual play failed:",s)})}else v.value.pause(),m.value=!0};return ee(async()=>{G();const o=b.query.invite_code;try{const l=await p.dispatch("app/getEventBySlug",{slug:b.params.slug,inviteCode:o});l&&Date.parse(l.date)>Date.now()&&setTimeout(()=>{x.value||(y.value=!0)},4e3)}catch(l){console.error("Failed to fetch event:",l),p.commit("notify",{type:"error",message:d("invitation_page.error_fetching")})}const s=()=>{v.value&&X(),document.removeEventListener("click",s),document.removeEventListener("touchstart",s)};document.addEventListener("click",s),document.addEventListener("touchstart",s)}),oe(()=>{v.value&&(v.value.pause(),v.value=null),document.removeEventListener("click",()=>{}),document.removeEventListener("touchstart",()=>{})}),(o,s)=>{const l=le("scrollanimation");return n(),i("div",re,[j.value?(n(),i("div",ce,[u(t(V))])):g("",!0),e("div",ue,[e("div",_e,[e("button",{class:"animate-fade-in-down p-2 bg-theme-secondary text-white font-baltica font-semibold shadow-md rounded-md border border-theme-secondary hover:bg-white hover:text-theme-secondary disabled:opacity-50 disabled:cursor-not-allowed",onClick:s[0]||(s[0]=Z=>T(1)),disabled:E.value},r(t(d)("invitation_page.go")),9,ve),e("button",{class:"animate-fade-in-down p-2 bg-theme-secondary text-white font-baltica font-semibold shadow-md rounded-md border border-theme-secondary hover:bg-white hover:text-theme-secondary disabled:opacity-50 disabled:cursor-not-allowed",onClick:s[1]||(s[1]=Z=>T(0)),disabled:E.value},r(t(d)("invitation_page.not_go")),9,me)]),a.value?.invitation?(n(),i("div",pe,[e("div",{style:se({backgroundImage:`url(${a.value.invitation.bg_img})`}),class:"bg-no-repeat bg-cover bg-center w-full drop-shadow-md"},[e("div",he,[e("img",{class:"w-96 hidden mx-auto absolute top-8 left-[10px] -rotate-12 sm:block animate-fade-in-up",src:a.value.invitation.template.envelope_img,alt:"Envelope"},null,8,ge),e("img",{class:"w-80 mx-auto absolute top-8 left-0 right-0 drop-shadow-2xl animate-fade-in-down",src:a.value.invitation.invitation_img,alt:"Invitation"},null,8,fe)])],4),e("div",xe,[e("div",be,[e("div",{class:"px-4 md:px-20 text-xl break-words animate-fade-in-down",innerHTML:q.value},null,8,we),e("div",ye,[E.value?(n(),i("p",Ee,r(t(d)("invitation_page.event_passed",{date:U})),1)):(n(),i("div",ke,r(t(d)("invitation_page.until_the_event")),1)),f((n(),i("div",null,[u(t(S),{deadline:a.value.date},null,8,["deadline"])])),[[l]])])]),f((n(),i("div",Ie,[u(t(z),{date:a.value.date},null,8,["date"])])),[[l]]),a.value.photos_link?(n(),i("div",De,[f((n(),i("div",null,[e("div",Le,[u(t(O),{class:"w-8 h-8 mr-2"}),e("a",{href:a.value.photos_link,target:"_blank"},r(t(d)("invitation_page.show_images")),9,Pe)])])),[[l]])])):g("",!0),a.value?.video_link?(n(),i("div",Te,[f((n(),i("div",Ae,[e("div",null,[e("iframe",{src:`https://www.youtube.com/embed/${F.value}`,class:"w-full max-h-[420px] aspect-video",controls:"1",allowfullscreen:"",allowtransparency:"",allow:"autoplay"},null,8,Ce)])])),[[l]])])):g("",!0),f((n(),i("div",Ve,[e("h1",Se,[D(r(t(d)("invitation_page.venue"))+": ",1),e("span",Me,r(a.value.place),1)]),e("div",Oe,[a.value.address.address.startsWith("http")?(n(),i("a",{key:0,href:a.value.address.address,target:"_blank",class:"text-blue-600 underline text-lg"},r("Картаны ашу"),8,Re)):(n(),i("span",Ne,r(a.value.address.address),1))])])),[[l]]),a.value.images&&a.value.images.length>0?(n(),i("div",$e,[f((n(),i("div",null,[u(t(B),{images:a.value.images},null,8,["images"])])),[[l]])])):g("",!0),a.value?.audio?(n(),i("div",ze,[e("audio",{ref_key:"audioPlayer",ref:v,src:a.value.audio,type:"audio/mpeg",class:"hidden"},null,8,Be),e("div",{onClick:Y,class:ne([{"bg-gradient-to-r from-cyan-500 to-blue-500":m.value,"bg-gradient-to-r from-yellow-500 to-amber-600":!m.value},"fixed border bottom-0 right-0 rounded-full drop-shadow-lg w-16 h-16 mr-8 mb-8 z-20 cursor-pointer"])},[e("div",He,[m.value?(n(),ie(t(R),{key:0,class:"w-10 h-10 text-white"})):(n(),i("img",je))])],2)])):g("",!0)])])):g("",!0),u(t(L),{modal:x.value,title:t(d)("guest_questionnaire"),onCloseModal:I},{default:A(()=>[u(t(C),{event_id:a.value?.id,status:P.value,onSaved:Q,guest:k.value?.guest},null,8,["event_id","status","guest"])]),_:1},8,["modal","title"]),u(t(L),{modal:y.value,onCloseModal:I},{default:A(()=>[e("div",null,[e("div",qe,[u(t(N),{class:"block mx-auto text-blue-500 w-12"})]),e("p",Fe,[D(r(t(d)("invitation_page.greeting"))+" ",1),e("span",null,r(k.value?.guest?.fullname||t(d)("invitation_page.guest")),1)]),e("p",Ge,r(t(d)("invitation_page.response_prompt")),1),e("div",Ue,[e("button",{class:"flex mx-auto items-center rounded shadow-lg text-white py-2 px-4 bg-green-500 hover:bg-green-700 w-30",onClick:I},[u(t($),{class:"w-5 mr-2"}),D(" "+r(t(d)("invitation_page.confirm")),1)])])])]),_:1},8,["modal"])]),e("div",Qe,[e("a",We,[s[2]||(s[2]=e("img",{class:"w-32 inline",src:"/logo.png",alt:"logo"},null,-1)),e("span",Xe,r(t(d)("invitation_page.footer")),1)])]),u(t(M))])}}}),at=de(Ye,[["__scopeId","data-v-0d480bac"]]);export{at as default};
