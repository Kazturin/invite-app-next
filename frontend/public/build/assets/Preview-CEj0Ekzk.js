const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Spinner-CW_KfSez.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/vendor-vue-BcvRxASC.js","assets/vendor-BoxHjOd3.js","assets/vendor-BgDCIyLK.css","assets/vendor-vue-C86WLP6Y.css","assets/Countdown-KyHM4qeD.js","assets/Calendar-BXB5QNt1.js","assets/Gallery-DQcpLjpq.js","assets/Gallery-BQcvumtv.css"])))=>i.map(i=>d[i]);
import{_ as x}from"./app-BjUiReq9.js";import{u as B,r as g,n as O,O as S,p as L,o as M,a6 as N,q as a,f as s,t as u,y as i,C as f,s as e,A as r,z as $,X as j,v as m,H as v,K as H,G as w,I as U,b as F,a7 as G,e as W,m as q,a8 as K}from"./vendor-vue-BcvRxASC.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-BoxHjOd3.js";const Z={class:"bg-invitation"},J={key:0,class:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30"},Q={key:1,class:"container mx-auto bg-white pb-10 shadow-lg font-baltica"},Y={class:"flex justify-center space-x-2 p-2"},ee={class:"max-w-[650px] mx-auto h-[550px] relative"},te=["src"],se={class:"relative w-80 mx-auto absolute top-8 left-0 right-0"},ae=["src"],oe={key:0,class:"container mx-auto"},ne={class:"text-center text-xl sm:text-2xl mt-6 w-full"},ie=["innerHTML"],le={class:"border-yellow-300 border-t border-b max-w-[400px] mx-auto font-baltica font-semibold py-4 my-8"},re={class:"mb-4 text-lg text-gray-500"},de={class:"px-4 mb-8 max-w-md mx-auto"},ce={key:0,class:"text-center my-4"},ue={class:"flex justify-center items-center text-gray-600 text-lg"},me=["href"],ve={key:1},_e={class:"max-w-[750px] mt-4 mx-2 sm:mx-auto border border-gray-100 bg-white p-4 shadow-xl rounded overflow-hidden"},pe=["src"],he={class:"max-w-[750px] mt-4 mx-2 sm:mx-auto border border-gray-100 bg-white p-4 shadow-xl rounded overflow-hidden"},xe={class:"mx-auto text-center mb-2 text-xl"},ge={class:"ml-2"},fe={class:"text-center mt-4"},we=["href"],be={key:1,class:"text-lg"},ye={key:2},ke=["src"],Ee={class:"flex justify-center items-center h-full"},Le={key:1,class:"p-4",src:"/icons/music-pause.svg",alt:""},Ie={key:3,class:"container mx-auto px-4"},Ce={__name:"Preview",setup(Ae){const I=f(()=>x(()=>import("./Spinner-CW_KfSez.js"),__vite__mapDeps([0,1,2,3,4,5]))),C=f(()=>x(()=>import("./Countdown-KyHM4qeD.js"),__vite__mapDeps([6,1,2,3,4,5]))),A=f(()=>x(()=>import("./Calendar-BXB5QNt1.js"),__vite__mapDeps([7,2,3,4,5]))),P=f(()=>x(()=>import("./Gallery-DQcpLjpq.js"),__vite__mapDeps([8,2,3,4,5,1,9]))),{t:b,locale:Pe}=B();g(!1);const y=g(null),d=g(null),l=g(!0),p=O(),k=S(),V=q();p.dispatch("app/getEventEdit",k.params.id).then(n=>{p.dispatch("app/getWatermarkInvitation",n.invitation.invitation_img_path).then(o=>{y.value=o})});const z=L(()=>p.state.app.event.loading),t=L(()=>p.state.app.event.data);function D(n){const o=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|u\/\w\/|watch\?v=|&v=|shorts\/))([a-zA-Z0-9_-]{11})(?:[^\s]*)$/,_=n.match(o);return _&&_[1].length===11?_[1]:null}function T(){let n=t.value.order.status===0?{name:"LastStep",params:{id:k.params.id}}:{name:"MyEvent",params:{id:k.params.id}};V.push(n)}function E(){if(d.value){const n=d.value.play();n!==void 0&&n.then(()=>{l.value=!1}).catch(o=>{console.warn("Автозапуск музыки не удался:",o)})}}function R(){d.value&&(l.value?(d.value.play(),l.value=!1):(d.value.pause(),l.value=!0))}const h=()=>{E(),document.removeEventListener("click",h),document.removeEventListener("touchstart",h)};return M(()=>{const n=()=>{E(),document.removeEventListener("click",n),document.removeEventListener("touchstart",n)};document.addEventListener("click",n),document.addEventListener("touchstart",n)}),N(()=>{document.removeEventListener("click",h),document.removeEventListener("touchstart",h)}),(n,o)=>{const _=W("router-link"),c=K("scrollanimation");return s(),a("div",Z,[z.value?(s(),a("div",J,[u(i(I))])):(s(),a("div",Q,[e("div",Y,[u(_,{class:"bg-theme-secondary p-2 text-white rounded",to:{name:"EventUpdate",params:{id:n.$route.params.id}}},{default:$(()=>[...o[1]||(o[1]=[w("Өңдеу",-1)])]),_:1},8,["to"]),e("button",{onClick:T,class:"bg-theme-secondary p-2 text-white rounded"},"Аяқтау")]),e("div",{style:j({backgroundImage:"url("+t.value.invitation.bg_img+")"}),class:"bg-no-repeat bg-cover bg-center w-full drop-shadow-md"},[e("div",ee,[e("img",{class:"w-96 hidden mx-auto absolute top-8 left-[10px] -rotate-12 sm:block animate-fade-in-up",src:t.value.invitation.template.envelope_img,alt:""},null,8,te),e("div",se,[y.value?(s(),a("img",{key:0,class:"w-full shadow-lg animate-fade-in-down",src:y.value,alt:""},null,8,ae)):r("",!0)])])],4),t.value?(s(),a("div",oe,[e("div",ne,[e("div",{class:"p-4 md:px-20 text-xl break-words",innerHTML:t.value.description},null,8,ie),e("div",le,[e("div",re,v(i(b)("invitation_page.until_the_event")),1),m((s(),a("div",null,[u(i(C),{deadline:t.value.date},null,8,["deadline"])])),[[c]])])]),m((s(),a("div",de,[u(i(A),{date:t.value.date},null,8,["date"])])),[[c]]),t.value.photos_link?(s(),a("div",ce,[m((s(),a("div",null,[e("div",ue,[u(i(H),{class:"w-8 h-8 mr-2"}),e("a",{href:t.value.photos_link,target:"_blank"},v(i(b)("invitation_page.show_images")),9,me)])])),[[c]])])):r("",!0),t.value.video_link?(s(),a("div",ve,[m((s(),a("div",_e,[o[2]||(o[2]=e("h1",{class:"w-48 mx-auto text-center mb-2 text-xl"},"Видео",-1)),e("div",null,[e("iframe",{src:"https://www.youtube.com/embed/"+D(t.value.video_link),class:"w-full max-h-[420px] aspect-video",controls:"1",allowfullscreen:"",allowtransparency:"",allow:"autoplay"},null,8,pe)])])),[[c]])])):r("",!0),m((s(),a("div",he,[e("h1",xe,[w(v(i(b)("invitation_page.venue"))+": ",1),e("span",ge,v(t.value.place),1)]),e("div",fe,[t.value.address.address.startsWith("http")?(s(),a("a",{key:0,href:t.value.address.address,target:"_blank",class:"text-blue-600 underline text-lg"},v("Картаны ашу"),8,we)):(s(),a("span",be,v(t.value.address.address),1))])])),[[c]]),t.value.audio?(s(),a("div",ye,[e("audio",{src:t.value.audio,type:"audio/mpeg",class:"hidden",ref_key:"audio",ref:d},[...o[3]||(o[3]=[w(" Ваш браузер не поддерживает элемент ",-1),e("code",null,"audio",-1),w(". ",-1)])],8,ke),e("div",null,[e("div",{onClick:o[0]||(o[0]=Ve=>R()),class:U([{"bg-gradient-to-r from-cyan-500 to-blue-500":l.value,"bg-gradient-to-r from-yellow-500 to-amber-600":!l.value},"fixed border bottom-0 right-0 rounded-full drop-shadow-lg w-16 h-16 mr-8 mb-8 z-20 cursor-pointer"])},[e("div",Ee,[l.value?(s(),F(i(G),{key:0,class:"w-10 h-10 text-white"})):r("",!0),l.value?r("",!0):(s(),a("img",Le))])],2)])])):r("",!0),t.value.images&&t.value.images.length>0?(s(),a("div",Ie,[m((s(),a("div",null,[u(i(P),{images:t.value.images},null,8,["images"])])),[[c]])])):r("",!0)])):r("",!0),o[4]||(o[4]=e("div",null,null,-1))]))])}}},Be=X(Ce,[["__scopeId","data-v-6d9c914a"]]);export{Be as default};
