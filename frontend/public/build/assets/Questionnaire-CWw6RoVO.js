import{r as p,q as u,f as o,s as e,v as x,R as w,y as i,F as _,n as N,o as V,b as M,A as h,z as O,H as f,G as S,L as j,t as B,M as q}from"./vendor-vue-BcvRxASC.js";import z from"./Alert-TY5PVnD8.js";import{a0 as A}from"./vendor-BoxHjOd3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"flex items-center"},J={class:"grow"},D={class:"flex"},L=["name","id"],U={__name:"ChildEditor",props:{child:Object,index:Number},emits:["change","addChild","deleteChild"],setup(n,{emit:b}){const v=n,d=b,r=p(JSON.parse(JSON.stringify(v.child)));function m(){const t=r.value;d("change",t)}function y(){d("deleteChild",v.child)}return(t,a)=>(o(),u(_,null,[a[3]||(a[3]=e("div",{class:"flex items-center justify-between"},null,-1)),e("div",H,[e("div",J,[e("div",D,[x(e("input",{type:"text",name:"child_"+i(r).data,"onUpdate:modelValue":a[0]||(a[0]=g=>i(r).fullname=g),onChange:m,id:"child_"+i(r).data,class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:""},null,40,L),[[w,i(r).fullname]]),e("button",{type:"button",onClick:a[1]||(a[1]=g=>y()),class:"text-xs py-1 px-3 rounded-sm border border-transparent text-red-500 hover:border-red-600"},[...a[2]||(a[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])])])])]),a[4]||(a[4]=e("hr",{class:"my-4"},null,-1))],64))}},E={class:"px-5 pb-5 pt-1"},F={class:"mt-2"},G={for:"fullname",class:"text-left block text-sm font-medium leading-6 text-gray-900 mb-2"},T={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600"},P={class:"mt-2"},Q={for:"relative",class:"text-left block text-sm font-medium leading-6 text-gray-900 mb-2"},R={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600"},I=["placeholder"],K={key:0,class:"bg-white my-4 border-t border-gray-300"},W={class:"text-md font-semibold mb-2"},X={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Y=["disabled"],Z={key:0,class:"w-5 h-5 mr-1 rounded-full animate-spin border-2 border-solid border-white border-t-transparent"},ee={key:1},te={key:2},se={key:3},oe={__name:"Questionnaire",props:{event_id:{type:Number,required:!0},status:{type:Number,required:!0},labels:{type:Object,default:()=>({})},placeholders:{type:Object,default:()=>({})},guest:{type:Object,required:!1}},emits:["saved"],setup(n,{emit:b}){const v=N(),d=n;let r=p(null),m=p(!1);const y=b;let t=p({fullname:"",relative:"",email:"",phone:"",status:d.status,event_id:d.event_id,personally_invited:!1,child:[]});function a(s){const l={key:A(),fullname:""};t.value.child.splice(s,0,l)}function g(s){t.value.child=t.value.child.map(l=>l.key===s.key?JSON.parse(JSON.stringify(s)):l)}function k(s){t.value.child=t.value.child.filter(l=>l!==s)}function C(){m.value=!0,v.dispatch("app/saveGuest",t.value).then(s=>{m.value=!1,v.commit("notify",{type:"success",message:"Сәтті жіберілді"}),y("saved")}).catch(s=>{m.value=!1,console.log(s),r.value=s.response.data.message})}return V(()=>{d.status===2&&(t.value.personally_invited=!0),d.guest&&(t.value=d.guest,t.value.status=d.status)}),(s,l)=>(o(),u(_,null,[i(r)?(o(),M(z,{key:0,class:"flex-col items-stretch text-sm mx-4 mt-4"},{default:O(()=>[e("div",null,f(i(r)),1)]),_:1})):h("",!0),e("form",{onSubmit:q(C,["prevent"]),class:"mt-2 w-full"},[e("div",E,[e("div",F,[e("label",G,f(n.labels.fullname||s.$t("your_fullname")),1),e("div",T,[x(e("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>i(t).fullname=c),type:"text",id:"fullname",name:"fullname",class:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6"},null,512),[[w,i(t).fullname]])])]),e("div",P,[e("label",Q,f(n.labels.relative||"Туыстық қатынас"),1),e("div",R,[x(e("input",{"onUpdate:modelValue":l[1]||(l[1]=c=>i(t).relative=c),type:"text",id:"relative",name:"relative",class:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",placeholder:n.placeholders.relative||s.$t("relative_example")},null,8,I),[[w,i(t).relative]])])]),n.status===1||n.status===2?(o(),u("div",K,[e("div",W,[e("button",{type:"button",onClick:l[2]||(l[2]=c=>a()),class:"flex items-center text-sm mt-2 py-1 px-4 rounded-sm text-white bg-gray-600 hover:bg-gray-700"},[S(f(n.labels.addChild||s.$t("add_quest"))+" ",1),l[3]||(l[3]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1))])]),e("div",null,[(o(!0),u(_,null,j(i(t).child,(c,$)=>(o(),u("div",{key:c.key},[B(U,{child:c,index:$,onChange:g,onAddChild:a,onDeleteChild:k},null,8,["child","index"])]))),128))])])):h("",!0)]),e("div",X,[e("button",{disabled:i(m),type:"submit",class:"inline-flex w-full justify-center rounded-md bg-theme-primary px-3 py-2 text-sm font-semibold text-white disabled:cursor-not-allowed shadow-sm sm:ml-3 sm:w-auto"},[i(m)?(o(),u("span",Z)):h("",!0),n.status===1?(o(),u("span",ee,f(s.$t("invitation_page.go")),1)):h("",!0),n.status===0?(o(),u("span",te,f(s.$t("invitation_page.not_go")),1)):h("",!0),n.status===2?(o(),u("span",se,f(s.$t("button.save")),1)):h("",!0)],8,Y)])],32)],64))}};export{oe as default};
